Version 4
SHEET 1 7540 1220
WIRE 7088 -464 7088 -512
WIRE 4464 -448 4304 -448
WIRE 4688 -448 4544 -448
WIRE 5264 -448 5072 -448
WIRE 5488 -432 5328 -432
WIRE 5568 -432 5488 -432
WIRE 6208 -432 6112 -432
WIRE 6480 -432 6208 -432
WIRE 5264 -416 5216 -416
WIRE 6624 -416 6624 -448
WIRE 6624 -416 6576 -416
WIRE 6720 -416 6624 -416
WIRE 7024 -416 6960 -416
WIRE 6480 -400 6416 -400
WIRE 6208 -368 6208 -432
WIRE 6208 -352 6208 -368
WIRE 6416 -336 6416 -400
WIRE 6496 -336 6416 -336
WIRE 6624 -336 6624 -416
WIRE 6624 -336 6576 -336
WIRE 768 -320 -128 -320
WIRE 5296 -320 5296 -400
WIRE 5360 -320 5296 -320
WIRE 5488 -320 5488 -432
WIRE 5488 -320 5440 -320
WIRE 928 -288 224 -288
WIRE 7088 -256 7088 -368
WIRE 7312 -256 7088 -256
WIRE 96 -224 64 -224
WIRE 256 -224 160 -224
WIRE 4016 -224 3936 -224
WIRE 4096 -224 4080 -224
WIRE 4176 -224 4096 -224
WIRE 4304 -224 4304 -448
WIRE 4304 -224 4256 -224
WIRE 4432 -224 4304 -224
WIRE 6496 -224 6576 -336
WIRE 6496 -224 6416 -224
WIRE 6592 -224 6496 -336
WIRE 6640 -224 6592 -224
WIRE 4688 -208 4688 -448
WIRE 4688 -208 4496 -208
WIRE 4896 -208 4896 -304
WIRE 4896 -208 4688 -208
WIRE 5072 -208 5072 -448
WIRE 5072 -208 4896 -208
WIRE 4432 -192 4368 -192
WIRE -464 -176 -624 -176
WIRE -464 -144 -464 -176
WIRE 7088 -128 7088 -256
WIRE 560 -112 560 -160
WIRE 640 -112 560 -112
WIRE 768 -112 768 -320
WIRE 768 -112 720 -112
WIRE 6416 -96 6416 -224
WIRE 6496 -96 6416 -96
WIRE 6640 -80 6640 -224
WIRE 6640 -80 6592 -80
WIRE 6720 -80 6640 -80
WIRE 7024 -80 6960 -80
WIRE -624 -64 -624 -176
WIRE 560 -64 560 -112
WIRE 6208 -64 6208 -288
WIRE 6496 -64 6208 -64
WIRE 6640 -64 6640 -80
WIRE -368 -48 -416 -48
WIRE -128 -48 -128 -320
WIRE -80 -48 -128 -48
WIRE 64 -48 64 -224
WIRE 64 -48 0 -48
WIRE 96 -48 64 -48
WIRE 224 -32 224 -288
WIRE 224 -32 160 -32
WIRE 256 -32 256 -224
WIRE 256 -32 224 -32
WIRE 336 -32 256 -32
WIRE 768 -32 768 -112
WIRE 768 -32 592 -32
WIRE 928 -32 768 -32
WIRE -464 -16 -464 -64
WIRE -416 -16 -416 -48
WIRE -416 -16 -464 -16
WIRE 336 -16 336 -32
WIRE 464 -16 416 -16
WIRE 528 -16 464 -16
WIRE 4096 -16 4096 -224
WIRE 4912 -16 4096 -16
WIRE 5072 -16 4912 -16
WIRE 7088 -16 7088 -32
WIRE -416 0 -416 -16
WIRE -368 0 -416 0
WIRE -464 16 -464 -16
WIRE 3408 16 2768 16
WIRE -624 32 -624 16
WIRE 1600 32 1392 32
WIRE 1824 32 1600 32
WIRE 2288 48 1920 48
WIRE 5376 48 5312 48
WIRE 5488 48 5456 48
WIRE 464 64 464 -16
WIRE 672 64 464 64
WIRE 768 64 768 -32
WIRE 768 64 752 64
WIRE 1824 64 1792 64
WIRE 7312 64 7312 -256
WIRE 7488 64 7392 64
WIRE 2848 96 2848 80
WIRE 4912 96 4912 -16
WIRE 7488 96 7488 64
WIRE 2768 112 2768 16
WIRE 2800 112 2768 112
WIRE 3408 112 3056 112
WIRE 5312 144 5312 48
WIRE 1792 160 1792 64
WIRE 1888 160 1792 160
WIRE 2000 160 1968 160
WIRE 5216 160 5216 -416
WIRE 5280 160 5216 160
WIRE 2288 176 2288 48
WIRE 2400 176 2288 176
WIRE 2768 176 2768 112
WIRE 2768 176 2656 176
WIRE 5488 176 5488 48
WIRE 5488 176 5344 176
WIRE 5568 176 5488 176
WIRE 5072 192 5072 -16
WIRE 5280 192 5072 192
WIRE 1600 208 1600 32
WIRE 2848 208 2848 192
WIRE 3056 208 3056 112
WIRE 3056 208 2848 208
WIRE 3136 208 3056 208
WIRE 3296 208 3216 208
WIRE 3408 208 3296 208
WIRE 7488 208 7488 176
WIRE 7488 208 7392 208
WIRE 624 240 624 208
WIRE 704 240 624 240
WIRE 224 272 224 -32
WIRE 544 272 224 272
WIRE 624 272 624 240
WIRE 2400 272 2288 272
WIRE 2768 272 2656 272
WIRE 3056 272 3056 208
WIRE 3056 272 2880 272
WIRE 544 288 544 272
WIRE 592 288 544 288
WIRE 784 304 784 240
WIRE 784 304 656 304
WIRE 960 304 784 304
WIRE 1792 304 1744 304
WIRE 1808 304 1792 304
WIRE 2000 304 1968 304
WIRE 7104 304 7104 256
WIRE 592 320 576 320
WIRE 6224 336 6128 336
WIRE 6496 336 6224 336
WIRE 2768 352 2768 272
WIRE 2832 352 2768 352
WIRE 6640 352 6640 320
WIRE 6640 352 6592 352
WIRE 6736 352 6640 352
WIRE 7040 352 6976 352
WIRE 576 368 576 320
WIRE 1424 368 576 368
WIRE 6496 368 6432 368
WIRE 576 400 576 368
WIRE 6224 400 6224 336
WIRE 1792 416 1792 304
WIRE 1824 416 1792 416
WIRE 6224 416 6224 400
WIRE 2112 432 1920 432
WIRE 2288 432 2288 272
WIRE 2288 432 2192 432
WIRE 6432 432 6432 368
WIRE 6512 432 6432 432
WIRE 6640 432 6640 352
WIRE 6640 432 6592 432
WIRE 1600 448 1600 288
WIRE 1824 448 1600 448
WIRE 5216 448 5216 160
WIRE 2768 464 2768 352
WIRE 3408 464 2768 464
WIRE 1104 512 1088 512
WIRE 1328 512 1168 512
WIRE 7104 528 7104 400
WIRE 7312 528 7312 208
WIRE 7312 528 7104 528
WIRE 6512 544 6592 432
WIRE 6512 544 6432 544
WIRE 6608 544 6512 432
WIRE 6656 544 6608 544
WIRE 7104 640 7104 528
WIRE 672 672 544 672
WIRE 848 672 736 672
WIRE 944 672 848 672
WIRE 1088 672 1088 512
WIRE 1088 672 1024 672
WIRE 1184 672 1088 672
WIRE 6432 672 6432 544
WIRE 6512 672 6432 672
WIRE 1328 688 1328 512
WIRE 1328 688 1248 688
WIRE 1424 688 1424 368
WIRE 1424 688 1328 688
WIRE 6656 688 6656 544
WIRE 6656 688 6608 688
WIRE 6736 688 6656 688
WIRE 7040 688 6976 688
WIRE 1184 704 1136 704
WIRE 6224 704 6224 480
WIRE 6512 704 6224 704
WIRE 6656 704 6656 688
WIRE 1136 736 1136 704
WIRE 848 752 848 672
WIRE 7104 752 7104 736
WIRE 848 848 848 816
FLAG 128 0 0
FLAG 560 0 0
FLAG 624 336 0
FLAG 128 -64 VDD
IOPIN 128 -64 In
FLAG 560 -160 VDD
IOPIN 560 -160 In
FLAG 624 208 VDD
IOPIN 624 208 In
FLAG 96 -16 VCM
IOPIN 96 -16 In
FLAG 528 -48 VCM
IOPIN 528 -48 In
FLAG -464 96 0
FLAG -624 32 0
FLAG -624 -176 VDD
IOPIN -624 -176 Out
FLAG -368 -48 VCM
IOPIN -368 -48 Out
FLAG -368 0 VBIAS
IOPIN -368 0 Out
FLAG 576 400 VCTRL
IOPIN 576 400 In
FLAG 960 304 PWM
IOPIN 960 304 Out
FLAG 928 -32 VSQR
IOPIN 928 -32 Out
FLAG 928 -288 VRAMP
IOPIN 928 -288 Out
FLAG 1872 96 0
FLAG 1872 480 0
FLAG 1872 -16 VDD
IOPIN 1872 -16 In
FLAG 1872 368 VDD
IOPIN 1872 368 In
FLAG 1920 144 0
FLAG 2000 160 Gate_n
IOPIN 2000 160 In
FLAG 2000 304 Gate_p
IOPIN 2000 304 In
FLAG 1920 192 VDD
IOPIN 1920 192 In
FLAG 1728 160 0
FLAG 1728 304 0
FLAG 1584 256 0
FLAG 1632 256 VDD
IOPIN 1632 256 In
FLAG 2464 96 VDD
IOPIN 2464 96 In
FLAG 2592 96 VDD
IOPIN 2592 96 In
FLAG 2464 352 0
FLAG 2592 352 0
FLAG 2880 368 0
FLAG 3296 272 0
FLAG 3408 208 Vout
IOPIN 3408 208 Out
FLAG 3408 112 VSW
IOPIN 3408 112 Out
FLAG 3408 16 Gate_p
IOPIN 3408 16 Out
FLAG 3408 464 Gate_n
IOPIN 3408 464 Out
FLAG 1392 32 PWM
IOPIN 1392 32 In
FLAG 2160 400 VDD
IOPIN 2160 400 In
FLAG 2160 448 0
FLAG 1840 336 VDD
IOPIN 1840 336 In
FLAG 1840 288 0
FLAG 1920 336 VDD
IOPIN 1920 336 In
FLAG 1920 288 0
FLAG 2848 80 Vdd
IOPIN 2848 80 In
FLAG 2944 640 VREF
IOPIN 2944 640 Out
FLAG 2944 720 0
FLAG 544 672 Vout
IOPIN 544 672 In
FLAG 848 848 0
FLAG 1136 736 VREF
IOPIN 1136 736 In
FLAG 1216 656 VDD
IOPIN 1216 656 In
FLAG 1216 720 0
FLAG 3936 -224 Vin_a
IOPIN 3936 -224 In
FLAG 4896 -304 Vin+
IOPIN 4896 -304 Out
FLAG 4912 96 Vin-
IOPIN 4912 96 Out
FLAG 4368 -192 VCM
IOPIN 4368 -192 In
FLAG 4464 -240 VDD
IOPIN 4464 -240 In
FLAG 4464 -176 0
FLAG 5296 -464 0
FLAG 5312 208 0
FLAG 5568 -432 VPWM_P
IOPIN 5568 -432 Out
FLAG 5568 176 VPWM_N
IOPIN 5568 176 Out
FLAG 5216 448 VRAMP
IOPIN 5216 448 In
FLAG 3968 256 0
FLAG 5296 -320 VDD
IOPIN 5296 -320 In
FLAG 5312 48 VDD
IOPIN 5312 48 In
FLAG 3968 176 Vin_a
IOPIN 3968 176 Out
FLAG 6112 -432 VPWM_P
IOPIN 6112 -432 In
FLAG 6192 -320 0
FLAG 6240 -320 VDD
IOPIN 6240 -320 In
FLAG 6528 -368 0
FLAG 6528 -480 VDD
IOPIN 6528 -480 In
FLAG 6624 -512 0
FLAG 6544 -32 0
FLAG 6544 -144 VDD
IOPIN 6544 -144 In
FLAG 6640 0 0
FLAG 6848 -64 0
FLAG 6768 -64 0
FLAG 6848 -400 0
FLAG 6768 -400 0
FLAG 6768 -448 VDD
IOPIN 6768 -448 In
FLAG 6848 -448 VDD
IOPIN 6848 -448 In
FLAG 6768 -112 VDD
IOPIN 6768 -112 In
FLAG 6848 -112 VDD
IOPIN 6848 -112 In
FLAG 7088 -16 0
FLAG 7088 -512 VDD
IOPIN 7088 -512 In
FLAG 6128 336 VPWM_N
IOPIN 6128 336 In
FLAG 6208 448 0
FLAG 6256 448 VDD
IOPIN 6256 448 In
FLAG 6544 400 0
FLAG 6544 288 VDD
IOPIN 6544 288 In
FLAG 6640 256 0
FLAG 6560 736 0
FLAG 6560 624 VDD
IOPIN 6560 624 In
FLAG 6656 768 0
FLAG 6864 704 0
FLAG 6784 704 0
FLAG 6864 368 0
FLAG 6784 368 0
FLAG 6784 320 VDD
IOPIN 6784 320 In
FLAG 6864 320 VDD
IOPIN 6864 320 In
FLAG 6784 656 VDD
IOPIN 6784 656 In
FLAG 6864 656 VDD
IOPIN 6864 656 In
FLAG 7104 752 0
FLAG 7104 256 VDD
IOPIN 7104 256 In
SYMBOL OpAmps\\UniversalOpAmp 128 -32 R0
SYMATTR InstName U1
SYMBOL Comparators\\LTC6752 560 -96 R0
SYMATTR InstName U2
SYMBOL Comparators\\LTC6752 624 240 R0
SYMATTR InstName U3
SYMBOL res 16 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL cap 160 -240 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1.2n
SYMBOL res 432 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res 768 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 51k
SYMBOL res 736 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RPULL1
SYMATTR Value 7K
SYMBOL voltage -624 -80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5V
SYMBOL res -480 -160 R0
SYMATTR InstName R4
SYMATTR Value 10K
SYMBOL res -480 0 R0
SYMATTR InstName R5
SYMATTR Value 10K
SYMBOL res 800 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RPULL2
SYMATTR Value 7K
SYMBOL gates\\NAND 1840 48 R0
SYMATTR InstName X1
SYMBOL gates\\NAND 1840 432 R0
SYMATTR InstName X2
SYMBOL gates\\NOT 1936 160 R180
SYMATTR InstName X3
SYMBOL cap 1792 288 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName Cn1
SYMATTR Value 1n
SYMBOL cap 1792 144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName Cp1
SYMATTR Value 1n
SYMBOL gates\\NOT 1600 240 R90
SYMATTR InstName X4
SYMBOL PowerProducts\\LTC1693-1 2528 224 R0
SYMATTR InstName U4
SYMBOL nmos 2832 272 R0
SYMATTR InstName M_n1
SYMATTR Value Si7336ADP
SYMBOL ind 3120 224 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 100µ
SYMBOL cap 3312 272 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C2
SYMATTR Value 47µ
SYMBOL gates\\NOT 2144 432 R0
SYMATTR InstName X5
SYMBOL gates\\NOT 1856 304 R180
SYMATTR InstName X6
SYMBOL gates\\NOT 1936 304 R180
SYMATTR InstName X7
SYMBOL pmos 2800 192 M180
SYMATTR InstName M_p1
SYMATTR Value AO6407
SYMBOL voltage 2944 624 R0
SYMATTR InstName V4
SYMATTR Value 2.5
SYMBOL LED 672 688 R270
WINDOW 0 72 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMBOL res2 864 816 R180
WINDOW 0 36 56 Left 2
WINDOW 3 36 16 Left 2
SYMATTR InstName R9
SYMATTR Value 5
SYMBOL OpAmps\\UniversalOpAmp 1216 688 R0
SYMATTR InstName U6
SYMBOL res 1040 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL cap 1168 496 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 47µ
SYMBOL cap 4080 -240 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 100n
SYMBOL res 4272 -240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 4560 -464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL OpAmps\\UniversalOpAmp 4464 -208 R0
SYMATTR InstName U7
SYMBOL Comparators\\LTC6752 5296 -368 M180
SYMATTR InstName U5
SYMBOL Comparators\\LTC6752 5312 112 R0
SYMATTR InstName U8
SYMBOL res 5456 -336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 2k
SYMBOL res 5472 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 2k
SYMBOL voltage 3968 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value SINE(0 0.5 1k)
SYMBOL GATES\\NOT 6208 -336 R90
SYMATTR InstName X8
SYMBOL GATES\\NAND 6496 -416 R0
SYMATTR InstName X9
SYMBOL cap 6608 -512 R0
SYMATTR InstName C4
SYMBOL GATES\\NAND 6512 -80 R0
SYMATTR InstName X10
SYMBOL cap 6656 0 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C5
SYMBOL GATES\\NOT 6752 -416 R0
SYMATTR InstName X11
SYMBOL GATES\\NOT 6832 -416 R0
SYMATTR InstName X12
SYMBOL GATES\\NOT 6752 -80 R0
SYMATTR InstName X13
SYMBOL GATES\\NOT 6832 -80 R0
SYMATTR InstName X14
SYMBOL res 6976 -432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMBOL res 6976 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMBOL res 7408 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMBOL res 7408 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMBOL ind 7472 80 R0
SYMATTR InstName L2
SYMBOL pnp 7024 -368 M180
SYMATTR InstName Q1
SYMATTR Value 2N2907
SYMBOL npn 7024 -128 R0
SYMATTR InstName Q2
SYMATTR Value 2N2222
SYMBOL GATES\\NOT 6224 432 R90
SYMATTR InstName X15
SYMBOL GATES\\NAND 6512 352 R0
SYMATTR InstName X16
SYMBOL cap 6624 256 R0
SYMATTR InstName C7
SYMBOL GATES\\NAND 6528 688 R0
SYMATTR InstName X17
SYMBOL cap 6672 768 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C8
SYMBOL GATES\\NOT 6768 352 R0
SYMATTR InstName X18
SYMBOL GATES\\NOT 6848 352 R0
SYMATTR InstName X19
SYMBOL GATES\\NOT 6768 688 R0
SYMATTR InstName X20
SYMBOL GATES\\NOT 6848 688 R0
SYMATTR InstName X21
SYMBOL res 6992 336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMBOL res 6992 672 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMBOL pnp 7040 400 M180
SYMATTR InstName Q3
SYMATTR Value 2N2907
SYMBOL npn 7040 640 R0
SYMATTR InstName Q4
SYMATTR Value 2N2222
TEXT -736 768 Left 2 !.tran 5ms
